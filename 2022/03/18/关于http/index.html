
<!DOCTYPE html>
<html lang="en ">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hexo || </title>
    <meta name="author" content="John Doe">
    <meta name="description" content=" ">
    <meta name="keywords" content=" ">
    <link rel="icon" href="/images/avatar.png">
    <link rel="stylesheet" href="/css/antd.min.css">
    
    <link rel="stylesheet" href="/css/maiden-theme.css">
    
    <script src="/js/vue.js"></script>
    <script src="/js/antd.min.js"></script>
<meta name="generator" content="Hexo 5.4.0"></head>

<body>

    <div id="loading"
        style="height: 100vh; width: 100%; position: fixed;display: flex;z-index: 200; justify-content: space-between;">
        <div id="loadleft" style="width: 50%;background-color: #ffffff;transition: width 0.6s ease-out;"></div>
        <div id="loadright" style="width: 50%;background-color: #ffffff;transition: width 0.6s ease-out;"></div>
        <div
            style="position: fixed; height: 100vh; width: 100%;display: flex;justify-content: center;align-items: center;">
            <div id="loadcontent"
                style="width:400px;height:400px;padding:50px;border-radius:50%;display:flex;justify-content:center;align-items:center;border:solid 10px#a3ddfb; text-align:center;opacity:1;transition:opacity 0.3s ease-out;">
                <div>
                    <h2>LOADING...</h2>
                    <p>加载过慢请开启缓存(浏览器默认开启)</p>
                    <div>
                        <img src="/dancingkitty.gif" alt="loading">
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="layout">
        <transition name="into">
            <div v-show="show_page" style="display: none;">
                <div id="menu_show">
                     
<nav id="menu">
    <div class="desktop-menu">
        <a href="/">
            <span class="title">Hexo</span>
        </a>
        
        <a href="/">
            <span>
                <a-icon type="home" theme="filled" />
            </span>
            <span>home</span>
        </a>
        
        <a href="/about">
            <span>
                <a-icon type="idcard" theme="filled" />
            </span>
            <span>about</span>
        </a>
        
        <a href="/archives">
            <span>
                <a-icon type="folder" theme="filled" />
            </span>
            <span>archives</span>
        </a>
        
        <a href="/like/categories">
            <span>
                <a-icon type="book" theme="filled" />
            </span>
            <span>categories</span>
        </a>
        
        <a href="/like/tags">
            <span>
                <a-icon type="tags" theme="filled" />
            </span>
            <span>tags</span>
        </a>
        
        <a target="_blank" rel="noopener" href="https://en.korilin.com">
            <span>
                <a-icon type="compass" theme="filled" />
            </span>
            <span>英文博客</span>
        </a>
        
    </div>

    <div :class="'phone-menu ' + menu_show" id="phone-menu">
        <div :class="'title'" @click="menu_show=!menu_show">
            <span style="margin-right: 10px;">
                <a-icon type="appstore" theme="filled" />
            </span>
            <span>Hexo</span>
        </div>
        <div class="items" v-show="menu_show">
            
            <a href="/">
                <div class="item">
                    <div style="min-width:20px; max-width:50px; width: 10%">
                        <a-icon type="home" theme="filled" />
                    </div>
                    <div style="min-width:100px;max-width: 150%;width: 20%;">home</div>
                </div>
            </a>
            
            <a href="/about">
                <div class="item">
                    <div style="min-width:20px; max-width:50px; width: 10%">
                        <a-icon type="idcard" theme="filled" />
                    </div>
                    <div style="min-width:100px;max-width: 150%;width: 20%;">about</div>
                </div>
            </a>
            
            <a href="/archives">
                <div class="item">
                    <div style="min-width:20px; max-width:50px; width: 10%">
                        <a-icon type="folder" theme="filled" />
                    </div>
                    <div style="min-width:100px;max-width: 150%;width: 20%;">archives</div>
                </div>
            </a>
            
            <a href="/like/categories">
                <div class="item">
                    <div style="min-width:20px; max-width:50px; width: 10%">
                        <a-icon type="book" theme="filled" />
                    </div>
                    <div style="min-width:100px;max-width: 150%;width: 20%;">categories</div>
                </div>
            </a>
            
            <a href="/like/tags">
                <div class="item">
                    <div style="min-width:20px; max-width:50px; width: 10%">
                        <a-icon type="tags" theme="filled" />
                    </div>
                    <div style="min-width:100px;max-width: 150%;width: 20%;">tags</div>
                </div>
            </a>
            
            <a target="_blank" rel="noopener" href="https://en.korilin.com">
                <div class="item">
                    <div style="min-width:20px; max-width:50px; width: 10%">
                        <a-icon type="compass" theme="filled" />
                    </div>
                    <div style="min-width:100px;max-width: 150%;width: 20%;">英文博客</div>
                </div>
            </a>
            
        </div>
        <div class="curtain" v-show="menu_show"></div>
    </div>

</nav>
                </div>

                <div id="main">
                     
<link rel="stylesheet" href="/css/post-body.css">
<div class="article">
    <div>
        <h1> </h1>
    </div>
    <div class="info">
        <span class="date">
            <span class="icon">
                <a-icon type="calendar" theme="filled" />
            </span>
            2022/3/18
        </span>

        

        
    </div>

    <div class="content" v-pre>
        <h2 id="一-http"><a href="#一-http" class="headerlink" title="一 http"></a>一 http</h2><p>1 http是无状态协议，自身不对请求和响应之间的通信状态进行保存，这使得http是比较简单的，可以更快处理大量事务，确保协议的可伸缩性。</p>
<p>2  http用于客户端与服务端之间的通信，一个普通的请求包括：客户端向服务端发出请求，服务端处理请求，服务端将结果响应给客户端。</p>
<p>3 与http关系密切的协议：IP TCP DNS<br>（TCP/IP协议族按层次分为：应用层、网络层、传输层、链路层）<br><strong>IP协议</strong>:  位于网络层，作用是把各种数据包传递给对方，而要保证确实传送到对方那里， 则需要满足各类条件。 其中两个重要的条件是 IP 地址和 MAC地址 。 IP地址指明了节点被分配到的地址，可变换；Mac地址是指网卡所属的固定位置，基本不会更改。</p>
<p><strong>TCP协议</strong>：位于传输层，提供可靠的字节流服务（将大块数据分割成以报文段为单位的数据包进行管理）。TCP的三次握手：发送端首先将标有SYN标志的数据包发给对方，接收端收到后回传一个带有SYN/ACK标志的数据包来确认收到信息，最后发送端再回传一个带ACK标志的数据包代表“握手”结束。</p>
<p><strong>DNS服务</strong>：位于应用层，提供域名到IP地址的解析服务（通过域名查找IP地址或者逆向从IP地址反查域名）。<br><img src="https://img-blog.csdnimg.cn/276ebb0e190c452db861273a6f2c3d4b.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5p6r5qGl77yG5pyI5b2x,size_16,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p>
<h2 id="二-cookie"><a href="#二-cookie" class="headerlink" title="二 cookie"></a>二 cookie</h2><p><strong>基本介绍</strong>：1  当一个浏览器访问某web服务器时，web服务器会调用addCookie()方法，在响应头中添加一个名叫Set-Cookie的响应字段用于将Cookie返回给浏览器，当浏览器第二次访问该web服务器时会自动的将该cookie回传给服务器，来实现用户状态跟踪。</p>
<p>2  每一个cookie都有一个name和一个value，且name属性是唯一的。每个web浏览器储存多个web站点的cookie，浏览器一般只允许存放300个Cookie，每个站点最多存放20个Cookie，每个Cookie的大小限制为4KB。</p>
<p><strong>分类：会话级别 or 持久化</strong><br>1 会话级别的cookie储存在浏览器的内存中，用户关闭浏览器后删除。</p>
<p>2 持久化的cookie存储在浏览器目录下的文件（磁盘）中，这需要设置该cookie的生命周期setMaxAge，以秒为单位，优先级别高于expires，类似定时器代表过了多久浏览器删除该cookie。</p>
<p><strong>cookie的作用域</strong><br>cookie的domain和path属性定义了cookie的作用范围，即访问哪些网站或url时，会自动的带着该cookie。domain即域名，默认是当前主机(不包括子域名)，path默认是*(所有路径)，即域名后面的的路径。大部分情况下我们都是使用默认的设置即可。</p>
<h2 id="三-session"><a href="#三-session" class="headerlink" title="三 session"></a>三 session</h2><p><strong>基本介绍</strong>：web服务器中会开辟一块内存用来保存服务器端所有的session，每个session都会有一个唯一标识sessionid，根据客户端传过来的jsessionid(cookie中)，找到对应的服务器端的session。为了防止服务器端的session过多导致内存溢出，web服务器默认会给每个session设置一个有效期,    （30分钟）若有效期内客户端没有访问过该session，服务器就认为该客户端已离线并删除该session。</p>
<p><strong>保存sessionid的方式</strong></p>
<p>1 放在cookie中，通过一个特殊的cookie，name为JSESSIONID，value为服务器端某个 session的ID，默认的方式。但是当浏览器禁用cookie后session就会失效。</p>
<p>2 附加在url路径后面，在cookie浏览器被禁用时启用。可作为附加信息添在url后面或作为查询字符串加在url后面</p>
<p><strong>基本原理</strong></p>
<p>当用户发送请求到服务器后，先检查请求中是否含有sessionid，如果没有说明是第一次访问，服务器就会创建一个session对象，并将sessionid附加到set-cookie的响应头中。<br>如果存在sessionid就会到服务器查找对应的session。所以说，服务器端的session和客户端的cookie是息息相关的，若是没有了cookie，又不做其他处理的话，服务器端的session也没了。</p>
<p><strong>question：关闭浏览器后session会消失吗？</strong><br>tip：从服务端和浏览器端考虑。</p>
<h2 id="四-token"><a href="#四-token" class="headerlink" title="四 token"></a>四 token</h2><p><strong>基本介绍</strong>：token可理解为“令牌”，是全局唯一的一个字符串，用来识别唯一的客户端。token解决了session依赖于单个Web服务器的问题，session只存在于单一服务器中，而在web服务器集群环境下需要用户多次登录，使得用户体验很不好。比如，某人在a服务器上登录过一次，这时跳转到b服务器但依靠session就还得再登录一次。</p>
<p><strong>基本原理</strong>：模拟cookie、session的机制。根据“cookie中根据sessionid来查找服务器端session的”，<strong>生成客户端唯一字符串</strong>；使用redis的哈希类型来模型服务器端的session，<strong>得到服务端会话信息存储</strong>，再让二者匹配。</p>
<p>我们可以在用户第一次请求该web服务器时或是用户登录该web服务器时，生成一个全局唯一的token返回给前端存储，同时将该用户信息存到redis中并设置有效期，之后每次请求中都在请求头中带着这个token，服务器端根据这个token到redis中查找对应的用户信息，即得到了我们所说的 “session”。</p>
<h2 id="总结cookie-session-token"><a href="#总结cookie-session-token" class="headerlink" title="总结cookie session token"></a>总结cookie session token</h2><p><strong>cookie</strong>：一种数据载体，把session放在cookie中送到客户端那边去，之后cookie跟着每个请求头发给服务端。</p>
<p><strong>session</strong>：诞生并保存在服务器中，由服务器主导一切。</p>
<p><strong>token</strong>：诞生于服务器，保存于浏览器，由客户端主导一切，可以放在cookie或storage里，持“令牌”访问服务器。</p>

    </div>

    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">
    <div id="comment">
        <div id="gitalk-container">
        </div>
    </div>
    
</div>
                     
<footer id="footer">
    <div class="footer-wrap">
        <div>
            © 2018 - 2022 Hexo
            <span class="footer-icon">
                <a-icon type="flag" theme="filled" /></span>
            @John Doe
        </div>
        <div></div>
        <div>Based on the <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo Engine</a> & <a
                target="_blank" rel="noopener" href="https://github.com/korilin/hexo-theme-particle">Particle Theme</a></div>
        
    </div>

</footer>

<script src="/js/highlight.min.js"></script>
<script src="/js/particle.js"></script>
                </div>
            </div>
        </transition>
    </div>

    <script>
    new Vue({
        el: "#layout",
        data: {
            show_page: false,
            onload_menu: false,
            menu_show: false,
            card_top: 100
        },
        created: function () {
            var that = this
            window.onload = function () {
                that.show_page = true
                document.getElementById("loadcontent").style.opacity = 0
                setTimeout(function () {
                    document.getElementById("loadleft").style.width = 0
                    document.getElementById("loadright").style.width = 0
                }, 300)
                setTimeout(function () {
                    document.getElementById("loading").style = "display:none"
                }, 600)
            }
        },
        mounted: function () {
            var that = this
            window.addEventListener('scroll', function (e) {
                that.menu_show = false
            })
        },
        methods: {
            home_click: function () {
                window.scrollTo({
                    top: window.innerHeight - 80,
                    behavior: "smooth",
                });
            }
        }
    })
</script>

<script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script>
<script>
    const gitalk = new Gitalk({
        clientID: '',
        clientSecret: '',
        repo: 'hexo-theme-particle',      // The repository of store comments,
        owner: 'korilin',
        admin: ['korilin'],
        language: 'en',
        id: location.pathname,      // Ensure uniqueness and length less than 50
        distractionFreeMode: true  // Facebook-like distraction free mode
    })
    gitalk.render('gitalk-container')
</script>

</body>

</html>